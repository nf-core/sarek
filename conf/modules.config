/*
 * -------------------------------------------------
 *  Nextflow config file for module specific-options
 * -------------------------------------------------
 */

params {
    modules {
// BUILD_INDICES
        'build_intervals' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'bwa_index' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'bwamem2_index' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'create_intervals_bed' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'dict' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'index_target_bed' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'msisensor_scan' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'samtools_faidx' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'tabix_dbsnp' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'tabix_germline_resource' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'tabix_known_indels' {
            publish_dir      = 'reference'
            publish_files    = false
        }
        'tabix_pon' {
            publish_dir      = 'reference'
            publish_files    = false
        }
// MAPPING
        'bwa_mem1_mem' {
            args             = '-K 100000000 -M'
            args2            = 'sort'
            publish_files    = false
        }
        'bwa_mem1_mem_tumor' {
            args             = '-K 100000000 -M -B 3'
            args2            = 'sort'
            publish_files    = false
        }
        'bwa_mem2_mem' {
            args             = '-K 100000000 -M'
            args2            = 'sort'
            publish_files    = false
        }
        'bwa_mem2_mem_tumor' {
            args             = '-K 100000000 -M -B 3'
            args2            = 'sort'
            publish_files    = false
        }
        'merge_bam_mapping' {
            publish_by_meta  = true
            publish_files    = ['bam':'mapped']
            publish_dir      = 'preprocessing'
        }
        'qualimap_bamqc_mapping' {
            args             = '--paint-chromosome-limits --genome-gc-distr HUMAN -skip-duplicated --skip-dup-mode 0 -outformat HTML'
            publish_by_meta  = true
            publish_dir      = 'reports/qualimap'
        }
        'samtools_index_mapping' {
            publish_by_meta  = true
            publish_files    = ['bai':'mapped']
            publish_dir      = 'preprocessing'
        }
        'samtools_stats_mapping' {
            publish_by_meta  = true
            publish_dir      = 'reports/samtools_stats'
        }
// MARKDUPLICATES
        'markduplicates' {
            args             = 'REMOVE_DUPLICATES=false VALIDATION_STRINGENCY=LENIENT'
            suffix           = '.md'
            publish_by_meta  = true
            publish_dir      = 'preprocessing'
            publish_files    = ['bam': 'markduplicates', 'bai': 'markduplicates']
        }
// PREPARE_RECALIBRATION
        'baserecalibrator' {
            publish_by_meta  = true
            publish_dir      = 'preprocessing'
            publish_files    = ['recal.table':'markduplicates']
        }
        'gatherbqsrreports' {
            publish_by_meta  = true
            publish_dir      = 'preprocessing'
            publish_files    = ['recal.table':'markduplicates']
        }
// RECALIBRATE
        'applybqsr' {
            suffix           = 'recal'
            publish_by_meta  = true
            publish_dir      = 'preprocessing'
        }
        'merge_bam_recalibrate' {
            suffix           = '.recal'
            publish_by_meta  = true
            publish_files    = ['bam':'recalibrated']
            publish_dir      = 'preprocessing'
        }
        'qualimap_bamqc_recalibrate' {
            args             = '--paint-chromosome-limits --genome-gc-distr HUMAN -skip-duplicated --skip-dup-mode 0 -outformat HTML'
            publish_by_meta  = true
            publish_dir      = 'reports/qualimap'
        }
        'samtools_index_recalibrate' {
            suffix           = 'recal'
            publish_by_meta  = true
            publish_dir      = 'preprocessing'
            publish_files    = ['recal.bam':'recalibrated', 'recal.bam.bai':'recalibrated']
        }
        'samtools_stats_recalibrate' {
            publish_by_meta  = true
            publish_dir      = 'reports/samtools_stats'
        }
// GERMLINE_VARIANT_CALLING
        'haplotypecaller' {
            args             = '-ERC GVCF'
            suffix           = '.g'
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = false
        }
        'genotypegvcf' {
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = false
        }
        'concat_haplotypecaller' {
            suffix           = 'haplotypecaller'
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = ['vcf.gz':'haplotypecaller', 'vcf.gz.tbi':'haplotypecaller']
        }
        'concat_gvcf' {
            suffix           = 'haplotypecaller_gvcf'
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = ['vcf.gz':'haplotypecaller_gvcf', 'vcf.gz.tbi':'haplotypecaller_gvcf']
        }
        'strelka_germline' {
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = ['vcf.gz':'strelka', 'vcf.gz.tbi':'strelka']
        }
// TUMOR_VARIANT_CALLING

// PAIR_VARIANT_CALLING
        'manta_somatic' {
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = ['vcf.gz':'manta', 'vcf.gz.tbi':'manta']
        }
        'msisensor_msi' {
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = ['list':'msisensor']
        }
        'strelka_somatic' {
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = ['vcf.gz':'strelka', 'vcf.gz.tbi':'strelka']
        }
        'strelka_somatic_bp' {
            publish_by_meta  = true
            publish_dir      = 'variant_calling'
            publish_files    = ['vcf.gz':'strelka', 'vcf.gz.tbi':'strelka']
        }
// QC_TRIM
        'fastqc' {
            args             = '--quiet'
            publish_by_meta  = true
            publish_dir      = 'reports/fastqc'
        }
        'trimgalore' {
            args             = '--fastqc'
            publish_by_meta  = true
            publish_dir      = 'trimgalore'
        }
// OTHERS
        'get_software_versions' {
            publish_dir      = 'pipeline_info'
        }
    }
}
