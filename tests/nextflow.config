/*
========================================================================================
    Nextflow config file for running nf-test tests
========================================================================================
*/

// Specify any additional parameters here
// Or any resources requirements

// Should resolve issue with accessing s3 from the runners
aws.client.anonymous = true

// Should take care of all basepath
params.modules_testdata_base_path = 'https://raw.githubusercontent.com/nf-core/test-datasets/modules/data/'
params.igenomes_base              = 'https://raw.githubusercontent.com/nf-core/test-datasets/modules/data'

process {
    withName: 'SENTIEON_VARCAL_SNP' {
        // complains that training data is constant for MQRankSum, ReadPosRankSum, SOR
        ext.args   = { '--annotation QD  --annotation FS --annotation DP --var_type SNP' }
    }
}

env {
    // NOTE This is how pipeline users will use Sentieon in real world use
    SENTIEON_LICENSE = "$SENTIEON_LICSRVR_IP"
    // NOTE This should only happen in GitHub actions or nf-core MegaTests
    SENTIEON_AUTH_MECH = "$SENTIEON_AUTH_MECH"
    SENTIEON_AUTH_DATA = secrets.SENTIEON_AUTH_DATA
    // NOTE This is how pipeline users will test out Sentieon with a license file
    // nextflow secrets set SENTIEON_LICENSE_BASE64 \$(cat <sentieon_license_file.lic> | base64 -w 0)
}
